(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e(jQuery))}else{e(jQuery)}})(function(e){"use strict";e.fn.extend({omniWindow:function(t){t=e.extend(true,{animationsPriority:{show:["overlay","modal"],hide:["modal","overlay"]},overlay:{selector:".ow-overlay",hideClass:"ow-closed",animations:{show:function(e,t){return t(e)},hide:function(e,t){return t(e)},internal:{show:function(e){e.overlay.removeClass(t.overlay.hideClass)},hide:function(e){e.overlay.addClass(t.overlay.hideClass)}}}},modal:{hideClass:"ow-closed",animations:{show:function(e,t){return t(e)},hide:function(e,t){return t(e)},internal:{show:function(e){e.modal.removeClass(t.modal.hideClass)},hide:function(e){e.modal.addClass(t.modal.hideClass)}}},internal:{stateAttribute:"ow-active"}},eventsNames:{show:"show.ow",hide:"hide.ow",internal:{overlayClick:"click.ow",keyboardKeyUp:"keyup.ow"}},callbacks:{beforeShow:function(e,t){return t(e)},positioning:function(e,t){return t(e)},afterShow:function(e,t){return t(e)},beforeHide:function(e,t){return t(e)},afterHide:function(e,t){return t(e)},internal:{beforeShow:function(e){if(e.modal.data(t.modal.internal.stateAttribute)){return false}else{e.modal.data(t.modal.internal.stateAttribute,true);return true}},afterShow:function(n){e(document).on(t.eventsNames.internal.keyboardKeyUp,function(e){if(e.keyCode===27){n.modal.trigger(t.eventsNames.hide)}});n.overlay.on(t.eventsNames.internal.overlayClick,function(){n.modal.trigger(t.eventsNames.hide)})},positioning:function(e){e.modal.css("margin-left",Math.round(e.modal.outerWidth()/-2))},beforeHide:function(e){if(e.modal.data(t.modal.internal.stateAttribute)){e.modal.data(t.modal.internal.stateAttribute,false);return true}else{return false}},afterHide:function(n){n.overlay.off(t.eventsNames.internal.overlayClick);e(document).off(t.eventsNames.internal.keyboardKeyUp);n.overlay.css("display","");n.modal.css("display","")}}}},t);var n=function(e,n,r){var i=t.animationsPriority[e][0],s=t.animationsPriority[e][1];t[i].animations[e](n,function(o){t[i].animations.internal[e](o);t[s].animations[e](n,function(i){t[s].animations.internal[e](i);t.callbacks[r](n,t.callbacks.internal[r])})})};var r=function(e){if(!t.callbacks.beforeShow(e,t.callbacks.internal.beforeShow)){return}t.callbacks.positioning(e,t.callbacks.internal.positioning);n("show",e,"afterShow")};var i=function(e){if(!t.callbacks.beforeHide(e,t.callbacks.internal.beforeHide)){return}n("hide",e,"afterHide")};var s=e(t.overlay.selector);return this.each(function(){var n=e(this);var o={modal:n,overlay:s};n.bind(t.eventsNames.show,function(){r(o)}).bind(t.eventsNames.hide,function(){i(o)})})}});return e});